<html>
<head>
  <title>TreeSwing</title>
</head>
<body>
<a-scene id="scene" physics="gravity:-9.6">
  <a-assets>
    ${require('./templates/cursor.html')}
    ${require('./templates/touch-controls.html')}
    <a-mixin id="interact-obj" hoverable grabbable draggable stretchable
             event-set__hoveron="_event: hover-start; material.emissive: #424242"
             event-set__hoveroff="_event: hover-end; material.emissive: #000000"
             dynamic-body>
    </a-mixin>
    <a-mixin id="color-transformer" droppable static-body
             collision-filter="collisionForces: false"
             event-set__dragon="_event: dragover-start; material.emissive: #424242"
             event-set__dragoff="_event: dragover-end; material.emissive: #000000"
             geometry="primitive: box; width: 1; height: 2; depth: 1"
             material="opacity: 0.8"></a-mixin>
    <a-asset-item id="face-obj" src="assets/face.obj"></a-asset-item>
    <a-asset-item id="face-mtl" src="assets/face.mtl"></a-asset-item>
  </a-assets>

  <!-- SCENE -->
  <a-entity position="12 6 -11" scale="30 30 30" text="value: Welcome!;"></a-entity>
  <a-entity obj-model="obj: #face-obj; mtl: #face-mtl" position="0 3 -12" rotation="0 180 0" look-at="cube"></a-entity>
  ${require('./templates/environment.html')}

  <!-- CAMERA RIG FOR TELEPORT-CONTROLS AND SUPER-HANDS -->
  <a-entity id="cameraRig">
    <a-entity id="head"
              progressive-controls="gazeMixin: mycursor; touchMixin: mytouch; override: true; objects: .obj, .button; maxLevel: point;">
      <!-- Hand controls -->
      <a-entity teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: menu"
                haptics="events: triggerdown; dur: 50; force: 0.5" class="left-controller" hand-controls="left"></a-entity>
      <a-entity teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: grip"
                haptics="events: triggerdown; dur: 50; force: 0.5" class="right-controller" hand-controls="right"></a-entity>
    </a-entity>
  </a-entity>

  <!-- Interactable OBJECTS -->
  <a-entity id="cube" class="cube" mixin="interact-obj" geometry="primitive: box; width: 0.75; height: 0.75; depth: 0.75"
            position="-3 0.5 -2"
            material="color: #bdbdbd"></a-entity>
  <a-entity class="cylinder" mixin="interact-obj" geometry="primitive: cylinder; radius: 0.25; height: 1.5" position="-1.5 1 -2"
            material="color: #bdbdbd"></a-entity>
  <a-entity class="sphere" mixin="interact-obj" geometry="primitive: sphere; radius: 0.5" position="0 0.5 -2"
            material="color: #bdbdbd"></a-entity>
  <a-entity class="tetrahedron" mixin="interact-obj" geometry="primitive: tetrahedron; radius: 0.75" position="1.5 0.5 -2"
            material="color: #bdbdbd"></a-entity>
  <a-entity class="torus" mixin="interact-obj" geometry="primitive: torus; radius: 0.5; radius-tubular:0.1" position="3 0.5 -2"
            material="color: #bdbdbd"></a-entity>

  <!-- Color transformer -->
  <a-entity mixin="color-transformer" color-transformer="color: #ef2d5e" position="-3 1 -5" material="color: #ef2d5e" shadow></a-entity>
  <a-entity mixin="color-transformer" color-transformer="color: #7bc8a4" position="-1 1 -5" material="color: #7bc8a4" shadow></a-entity>
  <a-entity mixin="color-transformer" color-transformer="color: #4cc3d9" position="1 1 -5" material="color: #4cc3d9" shadow></a-entity>
  <a-entity mixin="color-transformer" color-transformer="color: #ffc65d" position="3 1 -5" material="color: #ffc65d" shadow></a-entity>

</a-scene>
</body>
</html>
